English | [中文](Building.zh_TW.md)

# Tiefsee Project Description

The Tiefsee4 contains 3 projects

## Tiefsee
- The main project, which uses WinForm to host WebView2
- Project type: .NET Framework 7

<br>

## TiefseeAppPackager
- Used to package the Tiefsee project into MSIX

<br>

## Www
- UI project
- Uses npm and gulp to compile EJS, TypeScript, SCSS, SVG

### Directory Structure
```
Www 
├ ejs: Directory for ejs, will be output as html after compilation
├ scss: Directory for scss, will be output as css after compilation
├ ts: Directory for ts, will be output as js after compilation
│
├ vender: Directory for third-party js
│
├ css: Generated by gulp compilation
├ js: Generated by gulp compilation
│
├ MainWindow.html: Main window, generated by gulp compilation
├ SettingWindow.html: Settings window, generated by gulp compilation
│
└ gulpfile.js
```

### Initial Installation

1. Install nodejs<br>
	https://nodejs.org/

<br>

2. Install Gulp
	```
	npm install gulp -g	
	```

<br>

3. Open the Www directory in Tiefsee4
	```
	cd Www
	```
<br>

4. Update npm packages
	```
	npm i
	```

<br>

### Compilation

- Package EJS, TypeScript, SCSS, and copy the processed files to the output folder of the Tiefsee project
	```
	gulp build
	```

- Continuously monitor file changes. When a file changes, automatically execute `gulp build`
	```
	gulp watch
	```

<br>


### SVG Icon Usage Instructions
Tiefsee has the function of switching themes. In order to make the icons switch colors, all icons use SVG.  
After executing `gulp build`, the SVG files in `Www/img/default` will all be packaged into one js, output to `Www/js/SvgList.js`  

- In SVG, you can use `var(--color-white)` to get the main color of the current theme, for example
	```svg
	<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25">
		<rect style="fill:var(--color-white)" x="7" y="12" width="11" height="1"/>
	</svg>
	```

- In ts, you can get the text of SVG through `SvgList["svg name"]`, for example
	```javascript
	var svgText = SvgList["window-menu.svg"];
	```

- In ejs, you can get the text of SVG through `<%- await readFile("./img/default/"); %>`, for example
	```html
	<div>
		<%- await readFile("./img/default/tool-rotateCcw.svg"); %>
	</div>
	```
	
## Supplement

Tiefsee is a program where all UI is rendered with WebView2, <br>
Commonly used C# features have been encapsulated so that JavaScript can call them directly, <br>
In most cases, there is no need to write C#, so you can directly open the `Www` project with Visual Studio Code for development.
